---
description: task_prompt_orchestrator用のタスク定義ファイルを生成する
---

# タスク定義ファイル生成

与えられた目的・指示から、task_prompt_orchestrator用のタスク定義ファイルを生成してください。

## デフォルト設定

- **機能名**: 指示内容から適切な名前を抽出（例: add-user-auth, refactor-api など）
- **出力先**: `doc/design/` （明示的に指定があればそちらを優先）

## 出力ファイル

### 必須: `doc/design/{feature-name}-tasks.yaml`

```yaml
# 出力先: doc/design/{feature-name}-tasks.yaml

# 前提条件（タスク開始前に完了しておくべき簡単な準備作業）
# - {ツールのインストール等}: `{コマンド}`
# ※ 数分で完了する作業のみ記載。それ以上かかる場合は独立したタスクにする

tasks:
  - id: task_1
    name: {タスク名}
    depends_on: []
    instruction: |
      {具体的な作業指示}

      ## 変更対象
      - `src/{path/to/file}`: {変更内容}

      ## 関連パス
      - `src/{path/to/related}`: {役割・関係性}
      - `{other/relevant/path}`: {役割・関係性}
    validation:
      - "{検証項目}"
```

### オプション: `{feature-name}-requirements.md`

以下のケースでは要件定義ドキュメントも生成してください:

- 複数の要件が絡み合う複雑な機能
- 入出力のデータ構造を明確にする必要がある場合
- 既存システムとの統合ポイントが多い場合
- ユーザーが明示的に要件定義を求めた場合

```markdown
# {機能名} 要件定義

## 概要
{目的・背景・期待される成果}

## 要件
### 要件1: {要件名}
- 入力: {入力の説明}
- 処理: {処理の流れ}
- 出力: {出力の説明}

## 関連コード
- `path/to/file`: {役割}
```

## タスク設計の原則

1. **単一責任**: 1タスク = 1つの明確な成果物
2. **検証可能**: 各タスクに機械的に確認可能な validation を定義
3. **依存関係の明示**: depends_on で順序を制御
4. **自己完結**: 各タスクの instruction は単独で実行可能な情報を含む
5. **セットアップと作業の分離**: ツールのインストール等のセットアップは、それを使う作業と同一タスクにしない
   - 前提条件として記載: 失敗リスクが低く数分で完了するもの
   - 独立タスクにする: 失敗リスクがある、または後続タスクの依存元になるもの
   - 悪い例: 「xenonインストール + complexityチェック」を1タスクに
   - 良い例: task_setup_xenon → task_complexity_check（depends_on: [task_setup_xenon]）

## 手順

1. 指示内容から機能名・スコープを把握
2. 必要に応じて既存コードを調査
3. タスクを分解・設計
4. 複雑な場合は要件定義ドキュメントも作成
5. タスク定義ファイルを生成

※ 数分で完了する単純作業（10行未満のconfig等）の場合は、タスクファイル作成ではなく直接実行するか確認

